<%- include('partials/header', { title: 'Login - Members Only' }) %>

<div class="flex justify-center px-4 mt-10">
  <div class="w-full max-w-md">
    <div class="bg-white rounded-lg shadow-lg p-8">
      <div class="text-center mb-6">
        <i class="fas fa-sign-in-alt text-4xl text-blue-600 mb-4"></i>
        <h2 class="text-3xl font-bold text-gray-800">Welcome Back</h2>
        <p class="text-gray-500 mt-2">Sign in to your account</p>
      </div>

      <% if (typeof error !== 'undefined' && error) { %>
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md flex items-center gap-2 mb-4" role="alert">
          <i class="fas fa-exclamation-triangle text-red-500"></i>
          <span><%= error %></span>
        </div>
      <% } %>

      <% if (typeof successMessage !== 'undefined' && successMessage) { %>
        <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-md flex items-center gap-2 mb-4" role="alert">
          <i class="fas fa-check-circle text-green-500"></i>
          <span><%= successMessage %></span>
        </div>
      <% } %>

      <form action="/login" method="post">
        <!-- Username -->
        <div class="mb-5">
          <label for="username" class="block text-gray-700 font-medium mb-2">Username or Email</label>
          <div class="flex items-center border border-gray-300 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-blue-500">
            <span class="px-3 text-gray-500">
              <i class="fas fa-user"></i>
            </span>
            <input
              type="text"
              name="username"
              id="username"
              placeholder="Enter your username or email"
              value="<%= typeof formData !== 'undefined' && formData.username ? formData.username : '' %>"
              required
              class="w-full py-3 px-3 focus:outline-none"
            />
          </div>
        </div>

        <!-- Password -->
        <div class="mb-5">
          <label for="password" class="block text-gray-700 font-medium mb-2">Password</label>
          <div class="flex items-center border border-gray-300 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-blue-500">
            <span class="px-3 text-gray-500">
              <i class="fas fa-lock"></i>
            </span>
            <input
              type="password"
              name="password"
              id="password"
              placeholder="Enter your password"
              required
              class="w-full py-3 px-3 focus:outline-none"
            />
            <button
              type="button"
              class="px-3 text-gray-500 hover:text-blue-600 focus:outline-none"
              id="togglePassword"
              onclick="togglePasswordVisibility()"
            >
              <i class="fas fa-eye" id="toggleIcon"></i>
            </button>
          </div>
        </div>

        <!-- Remember Me & Forgot -->
        <div class="flex justify-between items-center mb-5 text-sm">
          <label class="inline-flex items-center gap-2 text-gray-600">
            <input type="checkbox" id="rememberMe" name="rememberMe" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" />
            Remember me
          </label>
          <a href="/forgot-password" class="text-blue-500 hover:underline">Forgot password?</a>
        </div>

        <!-- Submit Button -->
        <div class="mb-6">
          <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium text-lg py-3 rounded-md flex justify-center items-center gap-2 transition">
            <i class="fas fa-sign-in-alt"></i> Sign In
          </button>
        </div>

        <!-- Register link -->
        <div class="text-center text-gray-500">
          Don't have an account?
          <a href="/register" class="text-blue-500 hover:underline">Create one here</a>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  function togglePasswordVisibility() {
    const passwordInput = document.getElementById("password");
    const toggleIcon = document.getElementById("toggleIcon");

    if (passwordInput.type === "password") {
      passwordInput.type = "text";
      toggleIcon.classList.remove("fa-eye");
      toggleIcon.classList.add("fa-eye-slash");
    } else {
      passwordInput.type = "password";
      toggleIcon.classList.remove("fa-eye-slash");
      toggleIcon.classList.add("fa-eye");
    }
  }
</script>

<%- include('partials/footer') %>
